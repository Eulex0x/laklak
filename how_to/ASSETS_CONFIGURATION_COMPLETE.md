# Asset Configuration Guide

## Overview

This guide explains how the asset configuration works, how to modify it, and how to add new assets.

**File:** `assets.csv` (master configuration)  
**Derived File:** `assets.txt` (generated for backfill)  
**Total Assets:** 547 (541 Binance + 6 Yahoo Finance)

---

## Asset Files

### 1. `assets.csv` - Master Configuration

**Location:** `/home/eulex/projects/laklak/assets.csv`  
**Format:** CSV with headers  
**Rows:** 547 assets

**Column Definitions:**

| Column | Type | Example | Description |
|--------|------|---------|-------------|
| `symbol` | String | BTCUSDT | Trading pair or ticker symbol |
| `ohlc_exchanges` | String | binance | Exchange to fetch OHLC price data |
| `funding_rate_exchanges` | String | binance+bybit+bitunix+hyperliquid | Exchanges to fetch funding rates (+ separated) |

**Format Example:**
```csv
symbol,ohlc_exchanges,funding_rate_exchanges
BTCUSDT,binance,binance+bybit+bitunix+hyperliquid
ETHUSDT,binance,binance+bybit+bitunix+hyperliquid
BTC=F,yfinance,
```

### 2. `assets.txt` - Backfill Configuration

**Generated by:** `python3 backfill.py` or manual generation  
**Format:** TEXT (symbol exchange)  
**Used by:** backfill.py for OHLC fetching

**Format Example:**
```
BTCUSDT binance
ETHUSDT binance
BTC=F yfinance
```

---

## Supported Assets

### Binance USDT Pairs (541 coins)

All active trading pairs on Binance Futures trading against USDT.

**Examples:**
- BTCUSDT - Bitcoin
- ETHUSDT - Ethereum
- BNBUSDT - Binance Coin
- SOLUSDT - Solana
- ADAUSDT - Cardano
- ... and 536 more

**Format:** XXXUSDT

**Features:**
- OHLC collection from Binance
- Funding rates from 4 exchanges (Binance, Bybit, Bitunix, Hyperliquid)
- Updated daily

### Yahoo Finance Symbols (6 assets)

**Symbols:**
- `BTC=F` - Bitcoin Futures
- `ETH=F` - Ethereum Futures
- `XRP=F` - Ripple Futures
- `SOL=F` - Solana Futures
- `^GSPC` - S&P 500 Index
- `^NDX` - NASDAQ-100 Index

**Format:** `SYMBOL=F` or `^INDEX`

**Features:**
- OHLC collection only (no funding rates)
- Traditional market data
- Daily updates

---

## Generating assets.txt

### Method 1: Automatic (During Backfill)

```bash
python3 backfill.py
# Automatically creates assets.txt from assets.csv
```

### Method 2: Manual Generation

```python
import csv

assets = []
with open('assets.csv', 'r') as f:
    # Skip comment lines
    for line in f:
        if line.startswith('symbol,'):
            break
    
    # Parse CSV
    reader = csv.DictReader([line] + f.readlines())
    for row in reader:
        if not row or not row.get('symbol'):
            continue
        symbol = row['symbol'].strip()
        ohlc_exchange = row.get('ohlc_exchanges', '').strip()
        
        exchange = ohlc_exchange or 'binance'
        assets.append(f"{symbol} {exchange}")

with open('assets.txt', 'w') as f:
    f.write('\n'.join(assets))

print(f"Created assets.txt with {len(assets)} assets")
```

---

## Modifying Assets

### Add New Binance Coin

1. **Edit assets.csv:**
   ```csv
   NEWCOINUSDT,binance,binance+bybit+bitunix+hyperliquid
   ```

2. **Regenerate assets.txt:**
   ```bash
   python3 backfill.py
   ```

3. **Next backfill includes new coin**

### Add Yahoo Finance Symbol

1. **Edit assets.csv:**
   ```csv
   AAPL,yfinance,
   ```
   Note: Empty funding_rate_exchanges column

2. **Regenerate assets.txt:**
   ```bash
   python3 backfill.py
   ```

### Remove Asset

1. **Option 1: Delete line from assets.csv**
   ```
   Remove the entire line
   ```

2. **Option 2: Disable (comment out)**
   ```csv
   # OLDCOINUSDT,binance,binance+bybit+bitunix+hyperliquid
   ```

3. **Regenerate assets.txt and re-run backfill**

### Change OHLC Source

**Example: Switch from Binance to Bybit**

```csv
# Before
BTCUSDT,binance,binance+bybit+bitunix+hyperliquid

# After
BTCUSDT,bybit,binance+bybit+bitunix+hyperliquid
```

---

## Asset Statistics

### Current Distribution

```
Total Assets:       547
├─ Binance:        541 (98.9%)
│  └─ All USDT pairs from Binance Futures
└─ Yahoo Finance:    6 (1.1%)
   ├─ Crypto Futures: BTC=F, ETH=F, XRP=F, SOL=F
   └─ Indices:       ^GSPC (S&P 500), ^NDX (NASDAQ)
```

### Exchange Distribution (Funding Rates)

```
Binance:     541 coins
Bybit:       541 coins
Bitunix:     541 coins
Hyperliquid: 541 coins
```

(Total 2,164 funding rate sources for redundancy)

---

## Supported Exchanges

### OHLC (Price Data)

| Exchange | Status | Pairs | Notes |
|----------|--------|-------|-------|
| Binance Futures | ✅ Active | 541 | Primary source for crypto |
| Bybit | ⚠️ Available | Not used | Alternative source |
| Bitunix | ⚠️ Available | Not used | Alternative source |
| Yahoo Finance | ✅ Active | 6 | Stocks/indices/futures |

### Funding Rates

| Exchange | Status | Coverage |
|----------|--------|----------|
| Binance | ✅ Primary | 541 coins |
| Bybit | ✅ Backup | 541 coins |
| Bitunix | ✅ Backup | 541 coins |
| Hyperliquid | ✅ Backup | 541 coins |

---

## Configuration Examples

### Example 1: All Binance USDT Pairs

**Configuration:**
```csv
symbol,ohlc_exchanges,funding_rate_exchanges
BTCUSDT,binance,binance+bybit+bitunix+hyperliquid
ETHUSDT,binance,binance+bybit+bitunix+hyperliquid
```

**Result:**
- OHLC: From Binance
- Funding rates: From 4 exchanges (redundancy)

### Example 2: Mix of Assets

**Configuration:**
```csv
symbol,ohlc_exchanges,funding_rate_exchanges
BTCUSDT,binance,binance+bybit+bitunix+hyperliquid
BTC=F,yfinance,
AAPL,yfinance,
```

**Result:**
- BTCUSDT: Crypto with funding rates
- BTC=F, AAPL: Traditional markets (no funding rates)

### Example 3: Single Exchange

**Configuration:**
```csv
symbol,ohlc_exchanges,funding_rate_exchanges
BTCUSDT,binance,binance
ETHUSDT,binance,binance
```

**Result:**
- OHLC: Binance
- Funding rates: Binance only (no redundancy)

---

## Backfill Behavior

### What Gets Backfilled

**From assets.txt:**
```
BTCUSDT binance     → Fetches OHLC from Binance
BTC=F yfinance      → Fetches OHLC from Yahoo Finance
```

**From assets.csv:**
- OHLC column determines data source
- Funding rate column is NOT used by backfill (separate process)

### Filter Assets for Backfill

**Option 1: Modify assets.csv**
```csv
# Comment out unwanted coins
# 1000BONKUSDT,binance,binance+bybit+bitunix+hyperliquid
```

**Option 2: Create custom assets.txt**
```
BTCUSDT binance
ETHUSDT binance
BNBUSDT binance
```

Then run backfill - it only processes what's in assets.txt

---

## Data Quality

### Binance USDT Pairs

✅ **Active Trading Pairs**
- Verified daily on Binance Futures
- Excludes delisted coins
- Includes new coins as they launch
- 541 active pairs (January 2026)

✅ **Data Availability**
- 90 days of historical data available
- 1-minute candles fully available
- No gaps in most pairs
- Some new coins may have limited history

### Yahoo Finance Assets

✅ **Data Quality**
- Highly reliable OHLC data
- Standardized daily updates
- Wide coverage of traditional markets
- Futures data available

---

## Maintenance

### Weekly Tasks

1. **Check for new Binance listings**
   ```bash
   # Verify assets.csv includes latest pairs
   # Update if needed
   ```

2. **Monitor data quality**
   ```python
   # Query sample of each coin
   # Check for gaps or anomalies
   ```

### Monthly Tasks

1. **Archive old data** (optional)
2. **Backup assets.csv**
3. **Update documentation**

### Quarterly Tasks

1. **Full asset review**
2. **Performance analysis**
3. **Exchange updates**

---

## Troubleshooting

### Problem: "Symbol not found on Binance"

**Cause:** Symbol is delisted or doesn't exist  
**Solution:** Remove from assets.csv, regenerate assets.txt

### Problem: "No data fetched for SYMBOL"

**Cause:** Symbol is inactive or too new  
**Solution:** Check on Binance Futures website, wait for more history

### Problem: assets.txt doesn't reflect assets.csv changes

**Solution:** Regenerate assets.txt
```python
# Run the generation script again
python3 << 'EOF'
# (Run generation script above)
EOF
```

### Problem: Too many assets, backfill too slow

**Solution:** Filter assets.txt to specific coins
```
# Only backfill top 50 coins
BTCUSDT binance
ETHUSDT binance
BNBUSDT binance
... (47 more)
```

---

## Asset CSV Format

### Full Example

```csv
# Asset Configuration - CSV Format
#
# Column Definitions:
#   symbol:           The trading pair or ticker symbol
#   ohlc_exchanges:   Exchanges to fetch OHLC price data
#   funding_rate_exchanges: Exchanges to fetch funding rates

symbol,ohlc_exchanges,funding_rate_exchanges
0GUSDT,binance,binance+bybit+bitunix+hyperliquid
1000000BOBUSDT,binance,binance+bybit+bitunix+hyperliquid
1000000MOGUSDT,binance,binance+bybit+bitunix+hyperliquid
1000BONKUSDT,binance,binance+bybit+bitunix+hyperliquid
...
BTC=F,yfinance,
ETH=F,yfinance,
XRP=F,yfinance,
SOL=F,yfinance,
^GSPC,yfinance,
^NDX,yfinance,
```

### Valid Formats

| Asset | OHLC | Funding | Valid |
|-------|------|---------|-------|
| BTCUSDT | binance | binance+bybit | ✅ |
| BTC=F | yfinance | (empty) | ✅ |
| ETHUSDT | binance | binance | ✅ |
| NEWCOIN | bybit | bybit+binance | ✅ |
| INVALID | | | ❌ |

---

## Export Assets

### Export Binance Coins Only

```python
import csv

binance_coins = []
with open('assets.csv', 'r') as f:
    reader = csv.DictReader(f)
    for row in reader:
        if row.get('ohlc_exchanges') == 'binance':
            binance_coins.append(row['symbol'])

print(f"Binance coins: {len(binance_coins)}")
for coin in binance_coins[:10]:
    print(f"  {coin}")
```

### Export to Different Format

```python
import pandas as pd

df = pd.read_csv('assets.csv', comment='#')
df.to_json('assets.json', orient='records')
df.to_parquet('assets.parquet')
df.to_sql('assets', sqlite3.connect('assets.db'))
```

---

## Summary

✅ 547 assets configured  
✅ 541 Binance USDT pairs  
✅ 6 Yahoo Finance symbols  
✅ Multi-exchange funding rates  
✅ Fully documented  
✅ Ready for backfill

**Next Step:** Generate assets.txt and start backfill
```bash
python3 backfill.py
```
